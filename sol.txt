import { Component } from '@angular/core';
import { FormControl, FormGroup, Validators } from '@angular/forms';

@Component({
  selector: 'app-datadriven',
  templateUrl: './datadriven.component.html',
  styleUrl: './datadriven.component.css'
})
export class DatadrivenComponent {
  myForm:FormGroup
  uname:FormControl
  pass:FormControl
  email:FormControl
  city:FormControl

  createFormControl(){
    this.uname=new FormControl('',Validators.required)
    this.pass=new FormControl('',)
    this.email=new FormControl('',[Validators.required,this.emailDomainValidator])
    this.city=new FormControl('')
  }
  createForm(){
    this.myForm= new FormGroup({
      uname:this.uname,
      pass:this.pass,
      email:this.email,
      city:this.city
    })
  }
  constructor(){
    this.createFormControl()
    this.createForm()
  }
  addUser(){
    console.log(this.myForm.value);
    
  }
  emailDomainValidator(control:FormControl){
    let email=control.value
    if(email && email.indexOf('@') !=-1){
      let[before,after]=email.split('@')
      if(after !=='qualcomm.com'){
        return {
          emailDomain:{
            parseDomain:after
          }
        }
      }
    }
    return null
  }
}
